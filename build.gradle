// create DMG using:
// $(/usr/libexec/java_home)/bin/javapackager -deploy -native dmg -srcfiles build/libs/jchmlib-0.2.jar -appclass org.jchmlib.app.ChmWebApp -name ChmWeb -outdir build/deploy -outfile ChmWeb -v
// need to replace Info.plist in ChmWeb.app
// FIXME: find/write tools for creating DMG

apply plugin: "java"
archivesBaseName = "jchmlib"
version = "0.2"

sourceSets {
    main {
        java {
            srcDirs = ["src"]
        }
        resources {
            srcDirs = ["resources"]
        }
    }
}

compileJava {
    options.compilerArgs << "-XDignore.symbol.file=true" << "-Xlint:unchecked"
    options.fork = true
    options.forkOptions.executable = 'javac'
}

jar {
    manifest {
        attributes(
                "Implementation-Title": "jchmlib",
                "Implementation-Version": version,
                "Main-Class": "org.jchmlib.app.ChmWebApp")
    }
}

repositories {
    maven {
        url "https://repo.mediathekview.de/repository/maven-public/"
    }
}

dependencies {
    // to compile Mac specific classes on non-Mac platform
    compileOnly 'com.yuvimasory:orange-extensions:1.3.0'
}
